(function(){"use strict";var e={956:function(e,t,a){var n=a(9242),r=a(3396);function o(e,t,a,n,o,i){const l=(0,r.up)("HelloWorld");return(0,r.wg)(),(0,r.j4)(l,{msg:"Welcome to Your Vue.js App"})}var i=a(7139);const l={class:"content-wrapper"},s=(0,r._)("div",{class:"hero-body is-small"},[(0,r._)("p",{class:"title"},"塔克鼠美术馆")],-1),c=(0,r._)("h1",null,null,-1),u={key:0,class:"has-text-grey column mt-1 mb-2"},h={key:1,class:"columns is-multiline is-variable is-6"},g={class:"card"},d={class:"card-image"},p={class:"image"},m=["href","data-caption"],f=["src","alt"],b={class:"content align-bottom"},y={class:"subtitle is-6"},v={key:2},k={class:"columns is-justify-content-center"};function P(e,t,a,n,o,P){const C=(0,r.up)("SearchComponent"),w=(0,r.up)("PaginationComponent");return(0,r.wg)(),(0,r.iD)("div",l,[s,c,(0,r._)("div",null,[(0,r.Wm)(C,{eraOptions:o.eraOptions,top20Tags:o.top20Tags,onEraChanged:P.handleEraChange,onEnterKeyup:P.handleEnter,onFilterData:P.doSearch,onCheckboxChanged:P.handleCheckboxChange,onTagQuery:P.handleTagQuery},null,8,["eraOptions","top20Tags","onEraChanged","onEnterKeyup","onFilterData","onCheckboxChanged","onTagQuery"])]),o.dataLoaded&&o.dataContent.length>0?((0,r.wg)(),(0,r.iD)("div",u," 找到 "+(0,i.zw)(o.dataContent.length)+" 件艺术品 ",1)):(0,r.kq)("",!0),o.dataLoaded?((0,r.wg)(),(0,r.iD)("div",h,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(P.paginatedData,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.catNo,class:"column is-6-mobile is-4-tablet is-3-desktop"},[(0,r._)("div",g,[(0,r._)("div",d,[(0,r._)("figure",p,[(0,r._)("a",{href:e.bigImageUrl,"data-fancybox":"gallery","data-caption":e.title+"<br>"+e.dimension+"<br>"+e.location},[e.imageUrl?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.imageUrl,alt:e.title},null,8,f)):(0,r.kq)("",!0)],8,m)])])]),(0,r._)("div",b,[(0,r._)("h6",null,(0,i.zw)(e.title_zh||e.title),1),(0,r._)("p",y,(0,i.zw)(e.artist+","+e.year)+"年",1)])])))),128))])):((0,r.wg)(),(0,r.iD)("div",v,"em....世界名画被偷走了，追踪中...")),(0,r._)("div",k,[P.totalPages>1?((0,r.wg)(),(0,r.j4)(w,{key:0,"current-page":o.currentPage,"total-pages":P.totalPages,onPageChanged:P.changePage},null,8,["current-page","total-pages","onPageChanged"])):(0,r.kq)("",!0)])])}var C=a(1076),w=a(6645),_=a(4731);const x={class:"pagination is-rounded",role:"navigation","aria-label":"pagination"},D={class:"pagination-list"},T={key:0},S=(0,r._)("span",{class:"pagination-ellipsis"},"…",-1),O=[S],E=["onClick","aria-label"],j={key:1},M=(0,r._)("span",{class:"pagination-ellipsis"},"…",-1),U=[M],$={key:2},q=["aria-label"];function A(e,t,a,n,o,l){return(0,r.wg)(),(0,r.iD)("nav",x,[(0,r._)("ul",D,[(0,r._)("li",null,[(0,r._)("a",{class:(0,i.C_)(["pagination-link",{"is-current":1===a.currentPage}]),onClick:t[0]||(t[0]=e=>l.changePage(1)),"aria-label":"Goto page 1"},"1",2)]),a.currentPage>3?((0,r.wg)(),(0,r.iD)("li",T,O)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pagesToShow,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e},[(0,r._)("a",{class:(0,i.C_)(["pagination-link",{"is-current":e===a.currentPage}]),onClick:t=>l.changePage(e),"aria-label":"Goto page "+e},(0,i.zw)(e),11,E)])))),128)),a.currentPage<a.totalPages-2?((0,r.wg)(),(0,r.iD)("li",j,U)):(0,r.kq)("",!0),a.totalPages>1?((0,r.wg)(),(0,r.iD)("li",$,[(0,r._)("a",{class:(0,i.C_)(["pagination-link",{"is-current":a.currentPage===a.totalPages}]),onClick:t[1]||(t[1]=e=>l.changePage(a.totalPages)),"aria-label":"Goto page "+a.totalPages},(0,i.zw)(a.totalPages),11,q)])):(0,r.kq)("",!0)])])}a(560);var N={name:"PaginationComponent",props:{currentPage:Number,totalPages:Number},methods:{changePage(e){this.$emit("page-changed",e)}},computed:{pagesToShow(){let e=[],t=Math.max(this.currentPage-2,2),a=Math.min(t+4,this.totalPages-1);1===this.currentPage&&(t=2,a=Math.min(6,this.totalPages-1)),this.currentPage===this.totalPages&&(a=this.totalPages-1,t=Math.max(this.totalPages-5,2));for(let n=t;n<=a;n++)e.push(n);return e}}},z=a(89);const K=(0,z.Z)(N,[["render",A]]);var L=K;const W={class:"field column is-three-quarters mb-1"},H={class:"select"},Z=(0,r._)("option",{value:""},"时间/时期",-1),Y=["value"],Q={class:"control"},V={class:"control"},F={class:"column is-three-quarters"},G={class:"checkbox"};function I(e,t,a,o,l,s){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",W,[(0,r._)("div",H,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.eraSelected=e),onChange:t[1]||(t[1]=t=>e.$emit("era-changed",l.eraSelected))},[Z,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.eraOptions,((e,t)=>((0,r.wg)(),(0,r.iD)("option",{key:t,value:t},(0,i.zw)(t)+" ("+(0,i.zw)(e)+") ",9,Y)))),128))],544),[[n.bM,l.eraSelected]])]),(0,r._)("div",Q,[(0,r.wy)((0,r._)("input",{class:"input",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.searchText=e),onKeyup:t[3]||(t[3]=(0,n.D2)((t=>e.$emit("enter-keyup",{searchText:l.searchText,eraSelected:l.eraSelected})),["enter"])),placeholder:"作品关键词"},null,544),[[n.nr,l.searchText]])]),(0,r._)("div",V,[(0,r._)("a",{class:"button is-info",onClick:t[4]||(t[4]=t=>e.$emit("filter-data",{searchText:l.searchText,eraSelected:l.eraSelected}))},"搜索")])]),(0,r._)("div",F,[(0,r._)("label",G,[(0,r.wy)((0,r._)("input",{type:"checkbox",onChange:t[5]||(t[5]=t=>e.$emit("checkbox-changed",l.isChecked)),"onUpdate:modelValue":t[6]||(t[6]=e=>l.isChecked=e)},null,544),[[n.e8,l.isChecked]]),(0,r.Uk)(" 精选馆藏 ")])])])}var R={name:"SearchComponent",props:["eraOptions"," "],data(){return{searchText:"",isChecked:!1,eraSelected:""}}};const J=(0,z.Z)(R,[["render",I]]);var B=J,X={name:"MyComponent",components:{SearchComponent:B,PaginationComponent:L},methods:{doSearch(e){this.dataContent=e?this.allData.filter((t=>this.checkEra(t.year,e.eraSelected)&&(!e.searchText||String(t.title).toLowerCase().includes(e.searchText.toLowerCase())))):this.allData},handleCheckboxChange(e){this.dataContent=e?this.allData.filter((e=>1==e.isHighlight)):this.allData},handleEraChange(e){this.dataContent=e?this.allData.filter((t=>this.checkEra(t.year,e))):this.allData},museumchange(e){this.dataContent=e?this.allData.filter((t=>this.checkEra(t.museum,e))):this.allData},handleTagQuery(e){this.dataContent=this.allData.filter((t=>String(t.title).toLowerCase().includes(e.toLowerCase())))},checkEra(e,t){if(!t)return!0;const[a,n]=t.split("-").map(Number);return e>=a&&e<=n},getUniqueYears(e){const t=new Set;return e.forEach((e=>{e.year&&t.add(e.year)})),Array.from(t)},handleEnter(e){this.doSearch(e)},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},shuffleArray(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e},calcTop20Tag(){console.log("split word: "+this.allArtWorkNames);const e=this.allArtWorkNames.split(/\s+/),t={};e.forEach((e=>{e in t?t[e]++:t[e]=1})),this.top20Tags=Object.entries(t).sort(((e,t)=>t[1]-e[1])).slice(0,20).map((e=>e[0])),console.log(`top20tags:${this.top20Tags}`)},nplProcess(){let e=(0,w.Z)(this.allArtWorkNames),t=[...e.nouns().out("array"),...e.verbs().out("array"),...e.adjectives().out("array")],a=t.reduce(((e,t)=>(e[t]=e[t]?e[t]+1:1,e)),{});this.top20Tags=Object.entries(a).sort(((e,t)=>t[1]-e[1])).slice(0,20).map((e=>e[0]))}},computed:{totalPages(){return Math.ceil(this.dataContent.length/this.itemsPerPage)},paginatedData(){const e=(this.currentPage-1)*this.itemsPerPage;return this.dataContent.slice(e,e+this.itemsPerPage)}},data(){return{allData:[],dataContent:[],dataLoaded:!1,currentPage:1,itemsPerPage:30,eraOptions:{},allArtWorkNames:"",top20Tags:[]}},created(){C.Z.get("translated_data.json").then((e=>{const t=this.shuffleArray(e.data),a=t.map((e=>(e.imageUrl&&(e.imageUrl=e.imageUrl.replace(/100px(?=[^/]*$)/,"200px"),e.bigImageUrl=e.imageUrl.replace(/(100px|150px|200px)(?=[^/]*$)/,"1000px")),e)));this.allData=a,this.doSearch(),this.dataLoaded=!0;const n={};this.allData.forEach((e=>{const t=parseInt(e.year),a=`${100*Math.floor(t/100)}-${100*Math.floor(t/100)+100}`;n[a]=(n[a]||0)+1})),this.eraOptions=n,_.KR.bind("[data-fancybox]",{Thumbs:{showOnStart:!1}}),_.KR.Thumbs=!1})).catch((e=>{console.error("Error reading the JSON file",e)}))}};const ee=(0,z.Z)(X,[["render",P]]);var te=ee,ae={name:"App",components:{HelloWorld:te}};const ne=(0,z.Z)(ae,[["render",o]]);var re=ne;document.title="塔克鼠美术馆",(0,n.ri)(re).mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],l=n[1],s=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var u=s(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self["webpackChunktakeshu"]=self["webpackChunktakeshu"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(956)}));n=a.O(n)})();
//# sourceMappingURL=app.ac215009.js.map